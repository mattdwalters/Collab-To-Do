<!DOCTYPE html>

<html>
	<head>
		<!--<title>User Events</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script type="text/javascript" src="../static/scripts.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <link href='https://fonts.googleapis.com/css?family=Lobster|Muli' rel='stylesheet'>
        <link rel="stylesheet" type="text/css" href="../static/style.css">-->
        <meta name="viewport" content="width=device-width, initial-scale=1">
	    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
	    <link href='https://fonts.googleapis.com/css?family=Lobster|Muli' rel='stylesheet'>
	</head>
	<style>

	body {
		font-family: "Muli";
		background-color: #ffdf14;
	}

	.logo {
		font-family: "Lobster";
		color: black;
	}

	/* Group List */

	.features-wrap {
	    display: flex;
	    flex-wrap: wrap;
	    justify-content: center;
	}

	.feature-link {
		color: black;
		text-decoration: none;
	}

	.feature-link:hover {
		color: #bababa;
		text-decoration: none;
	}

	.feature {
	    padding: 12px;
	    width: 100%;
	    min-width: 260px;
	    max-width: 260px;
	    height: 316px;
	    max-height: 316px;
	    flex-grow: 1;
	}
	.feature-inner {
		border-radius: 5px;
	    position: relative;
	    height: 100%;
	    background: #fff;
	    padding: 40px 24px;
	    box-shadow: 0 16px 48px rgba(32,41,50,0.12);
	}
	.feature-icon {
	    display: flex;
	    justify-content: center;
	}

	.feature-title {
	    margin-top: 24px;
	    margin-bottom: 4px;
	}

	.text-sm {
	    font-size: 18px;
	    line-height: 27px;
	    letter-spacing: -0.1px;
	}

	/* Group List End */

	/* Join List Bar */

	#join-list-bar {
		border: #eeeeee solid 1px;
		background-color: #fff;
		border-radius: 4px;
		width:50%;
		padding: 10px;
		-webkit-box-shadow: 0px 5px 10px -1px rgba(230,230,230,1);
		-moz-box-shadow: 0px 5px 10px -1px rgba(230,230,230,1);
		box-shadow: 0px 5px 10px -1px rgba(230,230,230,1);
  		transition: box-shadow 0.2s ease-in-out;
	}

	#join-list-bar:hover {
		-webkit-box-shadow: 0px 5px 10px -1px rgba(215,215,215,1);
		-moz-box-shadow: 0px 5px 10px -1px rgba(215,215,215,1);
		box-shadow: 0px 5px 10px -1px rgba(215,215,215,1);
	}

	#join-list-icon {
		height: 15px;
		width: 15px;
		margin: 5px;
		vertical-align: middle;
		float: left;
	}

	#join-list-bar-span {
	    display: block;
	    overflow: hidden;
	}

	#join-list-bar-input {
		width: 100%;
		border: none;
		border-color: transparent;
		outline: none;
		font-weight: bold;
	}

	/* Join List Bar */

	/* Navbar */

	/*#navbar {
		background-color: #fff;
		display: flex;
		align-items: center;
	}

	.navbar-tab{
		color:#000;
		text-decoration: none;
		text-align: center;
		font-size: 15px;
		margin: 2.4em 10px 20px 15px;
	  	padding-top:10px;
	}

	.navbar-tab:hover {
		color: #ffdf14;
	}

	.navbar-tab-div {
		margin: 2.1em 10px 20px 15px;
	}

	#nav-options {
		list-style-type: none;
		margin-right: 2em;
	}

	#nav-options li {
		float: right;
		vertical-align: middle;
	}

	#nav-options li a {
		display:flex;
		text-align:center;
		padding:10px 10px 10px 10px;
		text-decoration:none;
	}

	.nav-link:hover {
		color: #bbb !important;
		cursor: pointer;
	}*/

	/* Navbar End */

	/* Dropdown Menu */

	/*#todo-notif {
		color: #fd4242;
	}

	#todo-dropdown {
		border-radius: 3px;
		margin-top: 2em;
	}

	.dropdown-content {
		background-color: #fff;
		display: none;
		position: absolute;
		min-width: 250px;
		overflow: auto;
		-webkit-box-shadow: 0 16px 48px rgba(32,41,50,0.12);
		-moz-box-shadow: 0 16px 48px rgba(32,41,50,0.12);
		box-shadow: 0 16px 48px rgba(32,41,50,0.12);
		right: 0;
		z-index: 1;
	}

	.dropdown-content::before {
		position: absolute;
		top: -7px;
		left: 9px;
		display: inline-block;
		border-right: 7px solid transparent;
		border-bottom: 7px solid #CCC;
		border-left: 7px solid transparent;
		border-bottom-color: rgba(0, 0, 0, 0.2);
		content: '';
	}
	
	.dropdown-content::after {
	    position: absolute;
	    top: -6px;
	    left: 10px;
	    display: inline-block;
	    border-right: 6px solid transparent;
	    border-bottom: 6px solid white;
	    border-left: 6px solid transparent;
	    content: '';
	}

    .todo-title {
        font-size: 20px;
        margin-top: 10px;
    }

    .todo-group {
        font-size: 10px;
        margin-top: 0px;
    }*/

	/* Dropdown Menu End */

	#list-container {
		margin-top: 4em;
	}

	textarea {
		resize: none;
	}

	.show {
		display: block;
	}

	.modal-title {
		text-align: center;
	}

	#modal-title-container {
		text-align: center;
		margin: 0 auto;
		width: 50%;
	}

	#modal-form-content {
		text-align: center;
	}

	.new-list-div {
		border: 1px solid #e9ecef;
		border-radius: 2px;
		width: 60%;
		margin: 0 auto;
		margin-top: 7px;
		margin-bottom: 7px;
	}

	.new-list-input {
		outline: none;
		border: transparent;
		padding: 0px 15px 10px 15px;
		display: inline-block;
		width: 100%;
	}

	.new-list-label {
		display: inline-block;
		width:100%;
		text-align: left;
		float: left;
		font-size: 12px;
		margin: 5px -5px 5px 5px;
		color: #888;
	}

	#new-list-submit {
		margin: 0 auto;
		background-color: #ffdf14;
		color: black;
		font-size: 14px;
		padding-left: 2em;
		padding-right: 2em;
	}

	.modal {
	   position: absolute;
	   top: 3em;
	   bottom: 0;
	   z-index: 10040;
	   overflow: auto;
	   overflow-y: auto;
	}

	.navbar-custom {
		background-color: #fff;
	}

	.navbar-custom .navbar-brand,
	.navbar-custom .navbar-text,
	.navbar-custom .navbar-nav .nav-link {
	    color: black;
	}

	.navbar-custom .nav-item .nav-link:hover,
	.navbar-custom .nav-item .nav-link:active,
	.navbar-custom .nav-item .nav-link:focus {
	    color: #f4df42;
	}

	#todo-notif {
		color: #fd4242;
	}

	</style>
	<body>
		<!--<div id="navbar" class="row">
			<div id="logo-container" class="col-sm-1">
				<h1 class="logo">L</h1>
			</div>
			<div id="join-list" class="col-sm-6">
				<div id="join-list-bar">
					<img id="join-list-icon" src="../static/images/link.png">
					<span id="join-list-bar-span">
						<form action="{{ url_for('join_list') }}" method='post'>
							<input id="join-list-bar-input" type="text" name="listcode" value="{{ request.form.listcode }}" placeholder="Join list" autocomplete="off">
						</form>
					</span>
				</div>
			</div>
			<div class="col-sm-5">
				<ul id="nav-options">
					<li>
						<a href="" class="nav-link navbar-tab">Profile</a>
					</li>
					<li>
						<div class="navbar-tab-div dropdown">
							<a onclick="dropdownFunc()" class="nav-link dropbtn">To Dos<sup id="todo-notif"><strong>{% if assigned_items %}{{ assigned_length }}{% endif %}</strong></sup></a>
							<div id="todo-dropdown" class="dropdown-content">
							{% if not assigned_items %}
								<p id="empty-todo">Nothing to do!</p>
							{% else %}
								{% for row in assigned_items %}
								<a class="todo-element" href="{{ url_for('toDoList', lid=row['lid']) }}">
									<p class="todo-title">{{ row['itemname'] }}</p><br>
									<p class="todo-group">From: {{ row['listname'] }}</p>
								</a>
								{% endfor %}
							{% endif %}
						  	</div>
						</div>
					</li>
					<li>
						<a id="new-list-button" data-toggle="modal" data-target="#newlist" class="nav-link navbar-tab">New List</a>
					</li>
				</ul>
			</div>
		</div>-->
		<nav class="navbar navbar-expand-lg navbar-custom">
		    <h1 class="navbar-brand m-3 logo">L</h1>
		    <div id="join-list">
				<div id="join-list-bar">
					<span id="join-list-bar-span">
						<form action="{{ url_for('join_list') }}" class="form-inline" method='post'>
							<input id="join-list-bar-input" class="form-control" type="search" name="listcode" value="{{ request.form.listcode }}" placeholder="Join list" autocomplete="off">
						</form>
					</span>
				</div>
			</div>
		    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
		      <span class="navbar-toggler-icon"></span>
		    </button>

		    <div class="collapse navbar-collapse justify-content-end" id="collapsibleNavbar">
		      	<ul class="navbar-nav">
		        	<li class="nav-item">
		          		<a class="nav-link" data-toggle="modal" data-target="#new-list" href="#">New List</a>
		        	</li>
		        	<li class="nav-item dropdown">
		          		<a class="nav-link" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		            	To Dos<sup id="todo-notif"><strong>{% if assigned_items %}{{ assigned_length }}{% endif %}</strong></sup>
		          		</a>
		          		<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
		          		{% if not assigned_items %}
							<span class="dropdown-item-text">Nothing to do!</span>
						{% else %}
							{% for row in assigned_items %}
							<a class="dropdown-item" href="{{ url_for('toDoList', lid=row['lid']) }}">
								<span class="todo-title">{{ row['itemname'] }}</span>
								<span class="todo-group"><small>({{ row['listname'] }})</small></span>
							</a>
							{% endfor %}
						{% endif %}
		          		</div>
		        	</li>
			        <li class="nav-item">
			          	<a class="nav-link" href="#">Profile</a>
			        </li> 
		      	</ul>
		    </div>
		</nav>
		<div class="modal fade" id="new-list" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                    	<div>
                    		<h4 class="logo">L</h4>
                    	</div>
                    	<div id="modal-title-container">
                        	<h4 class="modal-title"><strong>New List</strong></h4>
                        </div>
                        <div>
                        	<button type="button" class="close" data-dismiss="modal">&times;</button>
                    	</div>
                    </div>
                    <form autocomplete="off" method="post">
	                    <div id="modal-form-content">
	                    	<div onclick="focusInput()" class="new-list-div">
	                    		<label for="name" class="new-list-label">Name:</label><br>
	                        	<input id="name" name="listname" class="new-list-input" type="text" value="{{ request.form.listname }}" required>
	                    	</div>
	                    	<div onclick="focusInput()" class="new-list-div">
	                    		<label for="description" class="new-list-label">Description:</label><br>
	                        	<textarea id="description" maxlength="120" name="description" class="new-list-input" type="text" value="{{ request.form.description }}" required></textarea>
	                    	</div>
	                    	<div onclick="focusInput()" class="new-list-div">
	                    		<label for="password" class="new-list-label">Password (Optional):</label><br>
	                        	<input id="password" name="password" class="new-list-input" type="password" value="{{ request.form.password }}">
	                    	</div>
	                    	<div onclick="focusInput()" class="new-list-div">
	                    		<label for="name" class="new-list-label">Confirm Password (Optional):</label><br>
	                        	<input id="confirmpassword" name="confirmpassword" class="new-list-input" type="password" value="{{ request.form.confirmpassword }}">
	                    	</div>
	                	</div>
	                	<div class="modal-footer">
	                		<button id="new-list-submit" type="submit" class="btn btn-default">Create</button>
	                	</div>
                	</form>
                </div>
            </div>
        </div>
        <div id="list-container">
	        <div class="row">
		        <div class="features-wrap offset-sm-1 col-sm-10">
		        {% if not list_list %}
					<p>No lists yet! Try creating one or entering a list code above</p>
				{% else %}
					{% for row in list_list %}
						<a class = "feature-link" href = "{{ url_for('toDoList', lid=row.lid) }}">
				            <div class="feature">
				            	<div class="feature-inner">
				                	<h2 class="feature-title">{{ row['listname'] }}</h2>
				                	<!-- Should be a 120 char limit -->
				                	<p class="text-sm">
				                  	{{ row['description'] }}
				                	</p>
				              	</div>
				            </div>
				        </a>
				    {% endfor %}
				{% endif %}
			    </div>
			</div>
		</div>
		<script>
		/* When the user clicks on the button, 
		toggle between hiding and showing the dropdown content */
		function dropdownFunc() {
		  document.getElementById("todo-dropdown").classList.toggle("show");
		}

		// Close the dropdown if the user clicks outside of it
		window.onclick = function(event) {
		  if (!event.target.matches('.dropbtn')) {
		    var dropdowns = document.getElementsByClassName("dropdown-content");
		    var i;
		    for (i = 0; i < dropdowns.length; i++) {
		      var openDropdown = dropdowns[i];
		      if (openDropdown.classList.contains('show')) {
		        openDropdown.classList.remove('show');
		      }
		    }
		  }
		}

		function closeDropdown(event) {

		}

		function focusInput() {
			this.closest('input').focus()
		}
		</script>
	</body>
</html>