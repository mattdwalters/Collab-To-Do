<!DOCTYPE html>

<html>
	<head>
		<title>User Events</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script type="text/javascript" src="../static/scripts.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <link href='https://fonts.googleapis.com/css?family=Lobster' rel='stylesheet'>
        <link href="https://fonts.googleapis.com/css?family=Raleway|Oxygen|Didact+Gothic" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="../static/style.css">
	</head>
	<style>

	body {
		font-family: "Oxygen";
	}

	.features-wrap {
	    display: flex;
	    flex-wrap: wrap;
	    justify-content: center;
	}

	@media(max-width: 800px) {
		.features-wrap {
			justify-content: center
		}
	}

	.feature-link {
		color: black;
		text-decoration: none;
	}

	.feature-link:hover {
		color: #bababa;
		text-decoration: none;
	}

	.feature {
	    padding: 12px;
	    width: 100%;
	    max-width: 260px;
	    height: 316px;
	    max-height: 316px;
	    flex-grow: 1;
	}
	.feature-inner {
		border-radius: 5px;
	    position: relative;
	    height: 100%;
	    background: #fff;
	    padding: 40px 24px;
	    box-shadow: 0 16px 48px rgba(32,41,50,0.12);
	}
	.feature-icon {
	    display: flex;
	    justify-content: center;
	}

	.feature-title {
	    margin-top: 24px;
	    margin-bottom: 4px;
	}

	.text-sm {
	    font-size: 18px;
	    line-height: 27px;
	    letter-spacing: -0.1px;
	}

	#navbar {
		border-bottom: #eeeeee solid 1px;
		display: flex;
		align-items: center;
	}

	#logo-container {
		text-align: center;
	}

	#join-list-bar {
		border: #eeeeee solid 1px;
		background-color: #fff;
		border-radius: 4px;
		width:50%;
		padding: 10px;
		-webkit-box-shadow: 0px 5px 10px -1px rgba(230,230,230,1);
		-moz-box-shadow: 0px 5px 10px -1px rgba(230,230,230,1);
		box-shadow: 0px 5px 10px -1px rgba(230,230,230,1);
  		transition: box-shadow 0.2s ease-in-out;
	}

	#join-list-bar:hover {
		-webkit-box-shadow: 0px 5px 10px -1px rgba(215,215,215,1);
		-moz-box-shadow: 0px 5px 10px -1px rgba(215,215,215,1);
		box-shadow: 0px 5px 10px -1px rgba(215,215,215,1);
	}

	#join-list-icon {
		height: 15px;
		width: 15px;
		margin: 5px;
		vertical-align: middle;
		float: left;
	}

	#join-list-bar-span {
	    display: block;
	    overflow: hidden;
	}

	#join-list-bar-input {
		width: 100%;
		border: none;
		border-color: transparent;
		outline: none;
		font-weight: bold;
	}

	.navbar-tab{
		color:#000;
		text-decoration: none;
		text-align: center;
		font-size: 15px;
		margin: 2.4em 10px 10px 15px;
	  	padding-top:10px;
	}

	#nav-options {
		list-style-type: none;
	}

	#nav-options li {
		float: right;
	}

	#nav-options li a {
		display:flex;
		text-align:center;
		padding:10px 10px 10px 10px;
		text-decoration:none;
	}

	.dropdown {
		position: relative;
		display: inline-block;
	}

	.dropdown-content {
		background-color: #fff;
		display: none;
		position: absolute;
		min-width: 160px;
		overflow: auto;
		box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
		z-index: 99;
	}

	.dropdown-content a {
		color: black;
		padding: 12px 16px;
		text-decoration: none;
		display: block;
	}

	.dropdown a:hover {background-color: #ddd;}

	.show {display: block;}

	</style>
	<body>
		<div id="navbar" class="row">
			<div id="logo-container" class="col-sm-1">
				<h1 id="logo">&#x2713;</h1>
			</div>
			<div id="join-list" class="col-sm-6">
				<div id="join-list-bar">
					<img id="join-list-icon" src="../static/images/link.png">
					<span id="join-list-bar-span">
						<form action="{{ url_for('join_list') }}" method='post'>
							<input id="join-list-bar-input" type="text" name="listcode" value="{{ request.form.listcode }}" placeholder="Join list" autocomplete="off">
						</form>
					</span>
				</div>
			</div>
			<div class="col-sm-5">
				<ul id="nav-options">
					<li>
						<a href="" class="navbar-tab">Profile</a>
					</li>
					<li>
						<a id="new-list-button" data-toggle="modal" data-target="#newlist" class="navbar-tab">New list</a>
					</li>
					<li>
						<div class="dropdown">
							<a onclick="dropdownFunc()" class="dropbtn">To Dos</a>
							<div id="todoDropdown" class="dropdown-content">
							{% if not assigned_items %}
								<p>No todos!</p>
							{% else %}
								{% for row in assigned_items %}
									<a href="{{ url_for('toDoList', lid=row['lid']) }}">{{ row['itemname'] }}<br>From: {{ row['listname'] }}</a>
								{% endfor %}
							{% endif %}
						  	</div>
						</div>
					</li>
				</ul>
			</div>
		</div>
		<div class="modal fade" id="newlist" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">New list</h4>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <form method="post">
                        Name: <input name="listname" type="text" value="{{ request.form.listname }}"><br>
                        Description: <input name="description" type="text" value="{{ request.form.description }}"><br>
                        Password: <input name="password" type="text" value="{{ request.form.password }}"><br>
                        Confirm Password: <input name="confirmpassword" type="text" value="{{ request.form.confirmpassword }}"><br>
                        <button type="submit" class="btn btn-default">Done</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="row">
        	<div id="lists-header" class="offset-sm-1">
        		<h1>Your lists:</h1>
        	</div>
        </div>
        <div class="row">
	        <div class="features-wrap offset-sm-1 col-sm-10">
	        {% if not list_list %}
				<p>No lists yet! Try creating one or entering a list code above</p>
			{% else %}
				{% for row in list_list %}
					<a class = "feature-link" href = "{{ url_for('toDoList', lid=row.lid) }}">
			            <div class="feature">
			            	<div class="feature-inner">
			                	<h2 class="feature-title">{{ row['listname'] }}</h2>
			                	<!-- Should be a 120 char limit -->
			                	<p class="text-sm">
			                  	{{ row['description'] }}
			                	</p>
			              	</div>
			            </div>
			        </a>
			    {% endfor %}
			{% endif %}
		    </div>
		</div>
		<script>
		/* When the user clicks on the button, 
		toggle between hiding and showing the dropdown content */
		function dropdownFunc() {
		  document.getElementById("todoDropdown").classList.toggle("show");
		}

		// Close the dropdown if the user clicks outside of it
		window.onclick = function(event) {
		  if (!event.target.matches('.dropbtn')) {
		    var dropdowns = document.getElementsByClassName("dropdown-content");
		    var i;
		    for (i = 0; i < dropdowns.length; i++) {
		      var openDropdown = dropdowns[i];
		      if (openDropdown.classList.contains('show')) {
		        openDropdown.classList.remove('show');
		      }
		    }
		  }
		}
		</script>
	</body>
</html>